<!DOCTYPE html>
<html lang="en">
<head>
	<title>Music Player - Sing in</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="assets/styles/authorization&registration.css">
	<link rel="stylesheet" type="text/css" href="assets/styles/header.css">
	<link rel="stylesheet" type="text/css" href="assets/styles/common.css">
	<link rel="stylesheet" type="text/css" href="assets/styles/footer.css">
	<link rel="stylesheet" type="text/css" href="assets/styles/uploadsong.css">
	<link href="https://fonts.googleapis.com/css2?family=Odibee+Sans&display=swap" rel="stylesheet">
</head>
<body>
<!----------->
<header>
	<div class="header-container">
		<a href="index.html">
			<div class="div-player-logo">
				<img class="img-player-logo-size" src="assets/images/PlayerLogo.png" alt="Logo">
				<div class="div-header-player-name">
					Music Player
				</div>
			</div>
		</a>
		<div class="div-header-buttons">
			<a class="header-ref-button" href="index.html">
				<div class="header-btn">
					<p>On main page</p>
				</div>
			</a>
			<a class="header-ref-button" href="Registration.html">
				<div class="header-btn">
					<p>Sing up</p>
				</div>
			</a>
		</div>
	</div>
	<nav class="flex-nav-container">
		<a class="navigation-ref-button" href="index.html">
			Main page
		</a>
		<a class="navigation-ref-button" href="Playlists.html">
			Playlists
		</a>
		<a class="navigation-ref-button" href="Songs.html">
			Songs
		</a>
		<a class="navigation-ref-button" href="UploadSong.html">
			Upload song
		</a>
		<a class="navigation-ref-button" href="UpdateSong.html">
			Update song
		</a>
		<a class="navigation-ref-button" href="AddPlaylist.html">
			Add playlist
		</a>
	</nav>	
</header>
<!----------->
	<main>
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-storage.js"></script>
		<script>
			// Your web app's Firebase configuration
			var firebaseConfig = {
				apiKey: "AIzaSyDeP4ALp3ruga8OaDeKpOFZgT-O3l9Gjw4",
				authDomain: "valenitn-music.firebaseapp.com",
				databaseURL: "https://valenitn-music.firebaseio.com",
				projectId: "valenitn-music",
				storageBucket: "valenitn-music.appspot.com",
				messagingSenderId: "180826074845",
				appId: "1:180826074845:web:bb10e446d587815ee0b534"
			};
			// Initialize Firebase
			firebase.initializeApp(firebaseConfig);
			var auth = firebase.auth();
			var db = firebase.database();
			// TODO: fix
			//var storage = firebase.app().storage("gs://mplayer-coyoto.appspot.com");
		</script>
		<form onsubmit="return false;">
			<div class="div-form-size">
				<div class="div-auth-text">
					<h1 class="title-auth-text">Authorization</h1>
				</div>
				<div class="div-auth-box">
					<div class="div-auth-help-text">
						<p>Email</p>
						<input type="email" placeholder="Enter email" id="email">
					</div>
					<div class="div-auth-help-text">
						<p>Password</p>
						<input type="password" placeholder="Enter password" id=password>
					</div>
					<div class="div-button-auth">
						<button class="auth-btn" id="authButton">Sing in</button>
					</div>
				</div>
			</div>
		</form>
		<script>
			//way to get current user from docs
			firebase.auth().onAuthStateChanged(function(user) {
				if (user) {
					// User is signed in.
					console.log("User is signed in.");
					email = user.email;
					uid = user.uid;
					console.log("Email: " + email + "\nId: " + uid);
				} else {
					// No user is signed in.
					console.log("No user is signed in.");
				}
			});
			//sign in
			document.querySelector('#authButton').onclick = function() {
				console.log("Hello from event");
				email = document.querySelector('#email').value;
				password = document.querySelector('#password').value;
				alert("Email is " + email + "\nPass is " + password);
				console.log("Email is " + email + "\nPass is " + password);
				firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;
					// ...
					console.log("Error: " + errorCode);
					console.log("Message: " + errorMessage);
				});
				return true;
			}
		</script>		
	</main>
<!----------->
	<footer>
		<div class="div-footer-feedback">
			<p class="title-feedback-text">Feedback:</p>
			<div>
				<p class="feedback-text">
					Need help or find a bug?
					<br>
					Contact us by mail!
				</p>
			</div>
		</div>
		<div class="div-footer-feedback">
			<p class="feedback-text">
				E-mail:
				<a class="href-footer" href="mailto:Valentin2508247@mail.ru">
					Valentin2508247@mail.ru
				</a>
			</p>
		</div>
		<div class="div-footer-feedback">
			<p class="feedback-text">
				Sponsored by:
				<a class="href-footer" href="mailto:Valentin2508247@mail.ru">
					alex.gmlta@gmail.com
				</a>
			<p>
			</p>
		</div>
	</footer>
<!----------->
</body>
</html>